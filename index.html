<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Input Safety Filter</title>
  <meta name="robots" content="noindex" />

  <link rel="stylesheet" href="./assets/styles.css" />
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">
          <img
            src="./assets/logo-filter-full.png"
            class="logo-full"
            alt="Filter"
            loading="eager"
            decoding="async"
          />
          <span class="brand-name">AI Input Filter</span>
        </div>

        <div class="slogan" id="ui-slogan"></div>
      </div>

      <div class="lang">
        <button data-lang="de">DE</button>
        <button data-lang="en">EN</button>
        <button data-lang="zh" class="active">中文</button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h3 id="ui-in-title"></h3>
        <div class="sub" id="ui-in-sub"></div>

        <div class="outbox">
          <div class="filebar">
            <input id="pdfFile" type="file" accept="application/pdf" />
            <div class="filehint" id="pdfHint">PDF（文字型）可拖拽到这里，或点击选择文件</div>
          </div>

          <textarea id="inputText" spellcheck="false"></textarea>
        </div>

        <div class="moneybar">
          <label id="ui-money-label" for="moneyMode">金额保护：</label>
          <select id="moneyMode">
            <option value="off">关闭</option>
            <option value="m1">M1 精确遮盖</option>
            <option value="m2">M2 区间遮盖</option>
          </select>
          <span class="moneyhint" id="ui-money-hint">报价/合同建议开启</span>
        </div>

        <details id="panel">
          <summary>
            <span id="ui-panel-title"></span>
            <span class="pill"><span id="ui-panel-pill"></span> <strong id="ui-enabled-count">0</strong></span>
          </summary>

          <div class="hint" id="ui-panel-hint"></div>

          <div class="opt-group">
            <div class="opt-title" id="ui-l1-title"></div>
            <div class="opt-note" id="ui-l1-note"></div>
            <div class="checks" id="group-l1"></div>
          </div>

          <div class="opt-group">
            <div class="opt-title" id="ui-l2-title"></div>
            <div class="opt-note" id="ui-l2-note"></div>
            <div class="checks" id="group-l2"></div>
          </div>

          <div class="opt-group">
            <div class="opt-title" id="ui-l3-title"></div>
            <div class="opt-note" id="ui-l3-note"></div>
            <div class="checks" id="group-l3"></div>
          </div>
        </details>

        <div class="actions">
          <button class="btn primary" id="btnGenerate"></button>
          <div class="mini">
            <span class="pill"><span id="ui-hit-pill"></span> <strong id="hitCount">0</strong></span>
            <button class="btn secondary" id="btnExample"></button>
            <button class="btn secondary" id="btnClear"></button>
          </div>
        </div>
      </section>

      <div class="mid-filter" aria-hidden="true">
        <div class="flow-line"></div>
        <div class="filter-badge">
          <img
            src="./assets/logo-filter-icon.png"
            class="filter-icon"
            alt="Filter"
            loading="eager"
            decoding="async"
          />
        </div>
        <div class="flow-line"></div>
        <div class="filter-text">Filter</div>
      </div>

      <section class="card right">
        <h3 id="ui-out-title"></h3>
        <div class="sub" id="ui-out-sub"></div>

        <div class="outbox">
          <div class="output" id="outputText"></div>
        </div>

        <!-- ✅ 输出操作区：复制按钮 + 反馈（移到右侧） -->
        <div class="row">
          <button class="btn primary" id="btnCopy"></button>

          <div class="feedback" style="display:flex;align-items:center;gap:10px;justify-content:flex-end;">
            <div class="fbq" id="ui-fb-q"></div>
            <button class="iconbtn" id="btnUp">👍 <span id="upCount">0</span></button>
            <button class="iconbtn" id="btnDown">👎 <span id="downCount">0</span></button>
          </div>
        </div>

        <!-- 状态提示保留（如你后续也想删，我再一并处理 app.js 的状态逻辑） -->
        <div class="status" id="status" style="margin-top:10px;">
          <span class="dot2"></span>
          <span id="statusText"></span>
        </div>

        <!-- ✅ Share：只保留“下载卡片”对用户可见 -->
        <div class="sharebar">
          <div class="shareleft">
            <div class="sharetitle" id="ui-share-title">分享安全卡片</div>
            <div class="sharesub" id="ui-share-sub">不包含你的原文，仅分享安全处理成果</div>
          </div>

          <div class="shareright">
            <button class="btn primary" id="btnShareDownload">下载卡片</button>

            <!-- ⚠️ 为避免现有 share.js 报错：先隐藏但保留 DOM -->
            <div style="display:none;">
              <select id="shareSize">
                <option value="story">1080×1350（通用/小红书/公众号）</option>
                <option value="square">1080×1080（朋友圈/头像风格）</option>
                <option value="wide">1200×628（Twitter/LinkedIn）</option>
              </select>
              <button class="btn secondary" id="btnSharePreview">预览</button>
            </div>
          </div>
        </div>

        <!-- ⚠️ 同理：先隐藏 modal，后续改 share.js 时彻底删除 -->
        <div class="modal" id="shareModal" aria-hidden="true" style="display:none;">
          <div class="modalMask" id="shareMask"></div>
          <div class="modalCard">
            <div class="modalHead">
              <div class="modalTitle" id="ui-share-modal-title">分享预览</div>
              <button class="iconbtn close" id="btnShareClose">✕</button>
            </div>

            <div class="modalBody">
              <div class="previewWrap">
                <img id="sharePreviewImg" alt="Share preview" />
              </div>

              <div class="modalActions">
                <button class="btn secondary" id="btnShareCopyText">复制分享文案</button>
                <button class="btn secondary" id="btnShareSystem">系统分享</button>
                <button class="btn primary" id="btnShareDownload2">下载图片</button>
              </div>

              <div class="tiny muted" id="ui-share-note">
                注意：卡片不包含你的原文内容，只显示处理统计与隐私承诺。
              </div>
            </div>
          </div>
        </div>

        <div class="risk" id="riskBox"></div>

        <div class="links">
          <a id="linkLearn" href="./docs.html" target="_blank"></a>
          <a id="linkPrivacy" href="./privacy.html" target="_blank"></a>
          <a id="linkScope" href="./mvp.html" target="_blank"></a>
        </div>
      </section>
    </div>

    <footer>
      <div class="trust">
        <div class="msg">
          <div class="a" id="ui-risk-one"></div>
          <div class="b" id="ui-risk-two"></div>
        </div>

        <!-- ✅ footer 反馈已移走，这里留空以保持布局稳定（如你要彻底删 trust 区域，下一步一起做） -->
      </div>

      <div class="tiny" id="ui-foot"></div>
    </footer>
  </div>

  <!-- JS（顺序非常重要，不要改） -->
  <script src="./assets/i18n.js" defer></script>
  <script src="./assets/catalog.js" defer></script>
  <script src="./assets/rules.js" defer></script>
  <script src="./assets/pdf.js" defer></script>
  <script src="./assets/app.js" defer></script>
  <script src="./assets/share.js" defer></script>
</body>
</html>
